{% macro doclist(cat, year, limit) %}
<ol>
	{%- for doc in cat[year] | top(limit) -%}
	<li><a href="{{ doc.url | url }}"><time datetime="{{ doc.date }}">{{ doc.date }}</time></a>
	{%- endfor -%}
</ol>
{% endmacro %}

{% macro docarchive(cat) %}
{% for year, _ in cat %}
## {{ year }}
{{ doclist(cat, year) }}
{% endfor %}
{% endmacro %}
